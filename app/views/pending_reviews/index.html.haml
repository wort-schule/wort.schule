= title t('.title')

- if @change_groups.empty?
  = box do
    %p.text-center.text-gray-600= t('.no_pending_reviews')
- else
  = box do
    .mb-6
      %p.text-sm.text-gray-600
        = t('.total_pending', count: @change_groups.length)

    .overflow-x-auto
      %table.w-full.text-sm
        %thead
          %tr.border-b.border-gray-300
            %th.px-4.py-3.text-left.font-semibold
              = sortable_link(t('.word'), 'word_name', @sort_by, @sort_direction)
            %th.px-4.py-3.text-left.font-semibold
              = sortable_link(t('.word_type'), 'word_type', @sort_by, @sort_direction)
            %th.px-4.py-3.text-left.font-semibold
              = sortable_link(t('.review_type'), 'review_type', @sort_by, @sort_direction)
            %th.px-4.py-3.text-left.font-semibold
              = t('.changes')
            %th.px-4.py-3.text-left.font-semibold
              = sortable_link(t('.created'), 'created_at', @sort_by, @sort_direction)
            %th.px-4.py-3.text-left.font-semibold
              = sortable_link(t('.reviews'), 'reviews_count', @sort_by, @sort_direction)
            %th.px-4.py-3.text-right.font-semibold
              = t('.actions')

        %tbody
          - @change_groups.each do |change_group|
            %tr.border-b.border-gray-100.hover:bg-gray-50
              %td.px-4.py-3
                - if change_group.word_attribute_edits.present?
                  = link_to change_group.word_attribute_edits.first.word.name, change_group.word_attribute_edits.first.word, class: 'text-blue-600 hover:text-blue-900 font-medium'
                - elsif change_group.new_word.present?
                  %span.font-medium= change_group.new_word.name
                  %span.ml-2.text-xs.bg-yellow-100.text-yellow-800.px-2.py-1.rounded= t('.new')

              %td.px-4.py-3
                - if change_group.word_attribute_edits.present?
                  %span.text-xs.bg-blue-100.text-blue-800.px-2.py-1.rounded
                    = change_group.word_attribute_edits.first.word.class.human_name
                - elsif change_group.new_word.present?
                  %span.text-xs.bg-blue-100.text-blue-800.px-2.py-1.rounded
                    = change_group.new_word.word_type

              %td.px-4.py-3
                - if change_group.word_attribute_edits.present?
                  %span.text-xs.bg-green-100.text-green-800.px-2.py-1.rounded= t('.attribute_edits', count: change_group.word_attribute_edits.count)
                - elsif change_group.new_word.present?
                  %span.text-xs.bg-purple-100.text-purple-800.px-2.py-1.rounded= t('.new_word_proposal')

              %td.px-4.py-3
                - if change_group.word_attribute_edits.present?
                  .text-xs.space-y-1
                    - change_group.word_attribute_edits.limit(3).each do |edit|
                      %div
                        %span.font-medium= edit.attribute_label + ":"
                        %span.text-gray-600= truncate_value(edit.proposed_value)
                    - if change_group.word_attribute_edits.count > 3
                      %div.text-gray-500
                        = t('.and_more', count: change_group.word_attribute_edits.count - 3)
                - elsif change_group.new_word.present?
                  .text-xs.space-y-1
                    - if change_group.new_word.topic.present?
                      %div
                        %span.font-medium= t('.topic') + ":"
                        %span.text-gray-600= change_group.new_word.topic
                    - if change_group.new_word.meaning.present?
                      %div
                        %span.font-medium= t('.meaning') + ":"
                        %span.text-gray-600= truncate(change_group.new_word.meaning, length: 50)

              %td.px-4.py-3.text-sm.text-gray-500
                = time_ago_in_words(change_group.created_at)

              %td.px-4.py-3
                - confirmed_count = change_group.reviews.where(state: :confirmed).count
                - skipped_count = change_group.reviews.where(state: :skipped).count
                - other_count = change_group.reviews.where.not(state: [:confirmed, :skipped]).count

                - if confirmed_count > 0
                  %span.inline-block.mr-1.text-xs.bg-green-100.text-green-800.px-2.py-1.rounded
                    ✓ #{confirmed_count}
                - if skipped_count > 0
                  %span.inline-block.mr-1.text-xs.bg-yellow-100.text-yellow-800.px-2.py-1.rounded
                    − #{skipped_count}
                - if other_count > 0
                  %span.inline-block.text-xs.bg-gray-100.text-gray-800.px-2.py-1.rounded
                    ◇ #{other_count}
                - if change_group.reviews.empty?
                  %span.text-xs.text-gray-400= t('.no_reviews')

              %td.px-4.py-3.text-right
                = link_to t('.review'), review_path(change_group), class: 'button button-sm primary'
